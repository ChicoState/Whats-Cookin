<!--
    dashboard.html
    This is the customer dashboard page.
    It contains which fridges the customer has and a button to update the fridges.
    This is also where they can update their customer information.
--> 
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<style>
	.scroll 
    {
	Width: 5px;
	Height: 10px;
	Overflow-x:scroll;
	}
	</style>
	</head>
        <title>Dashboard</title>
    </head>
    <body>
        {% include "navigation.html" %}

        {% block content %}


        <br>
        <div class = "row">
            <div class = "col-md">
                <div class = "card card-body">
                    <h5>Account dashboard</h5>
                    <p>Welcome to your account page! Here you can see the various ingredients you have 
                        selected in your fridge, and if there isn't anything yet, you can start picking.</p>
                </div>

                <br>
                <div class="row">
                    <div class="col-md">
                        <div class="card card-body">
                            <h5>Customer: {{customer.name}}</h5>
                            <hr>
                            <a class="btn btn-outline-info  btn-sm btn-block" href="">Update Customer Information</a>
                            <br>
                            <a class="btn btn-outline-danger  btn-sm btn-block" href="">Delete Account</a>
                
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="card card-body">
                            <h5>Contact Information</h5>
                            <hr>
                            <p>Email: {{customer.email}}</p>
                            <p>Phone: {{customer.phone}}</p>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="card card-body">
                            <h5>Total Ingredients</h5>
                            <hr>
                            <h1 style="text-align: center;padding: 10px">{{ingredient_count}}</h1>
                        </div>
                    </div>
                </div>

                <br>
                <div class="row">
                    <div class = "card card-body">
                        <table class = "table">
                            <tr>
                                <th>Your Fridges</th>
                                <th>Last stocked</th>
                                <th></th>
                            </tr>
                                {% for fridge in fridges %}
                                <tr>
                                    <td>{{fridge.name}}</td>
                                    <td>{{fridge.date_stocked}}</td>
                                    <td>
                                        <a class="btn btn btn-sm  btn-info" href="{% url 'updateFridge' customer.id fridge.id %}">Fill this Fridge</a>
                                        <a class="btn btn btn-sm  btn-danger"  href="{% url 'deleteFridge' fridge.id %}">Delete</a>
                                    </td>
                                    
                                    <tr> 
                                        <table class="table">
                                            <th>Ingredients</th>
                                            <tr></tr>
                                            {% for i in fridge.ingredient.all %}
                                            <td>{{i.name}}</td>
                                            {% endfor %}
                                        </table>
                                    </tr>
                                </tr>
                                {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>


        {% endblock %}

</body>
<footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</footer>
</html>